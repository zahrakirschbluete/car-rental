{% block addCustomer %}
			<header class="text-center m-5">
					<h2 class=" font-weight-bold">Renting Done Right.
					</br>
					Finally.</h2>
			</header>



<nav class="navbar navbar-expand-lg navbar-dark nav-bg " >
  
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
  <ul class="navbar-nav mx-auto font-weight-bold">
      <li class="nav-item">
        <a class="nav-link" href="/customersMenu">Customers</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/carsMenu">Cars</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/rentCar">Rent Car</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/returnCar">Return Car</a>
      </li>
	  <li class="nav-item">
        <a class="nav-link" href="/history">History</a>
      </li>
    </ul>
  </div>
</nav>
      <main role="main" class="main">
    <div class="mainsection">
      <section class="form">
      <form id="addCustomer" method="post" action="">
      <fieldset>
        <legend class="formHeader">
          <h2>Add Customer</h2>
        </legend>
      
        
          
            <label>Name:
            <input type="text" name="customerName" autofocus="autofocus"></label>
            
            
      
            <label>SSN: 
            <input id="customerNumber" type="text" name="customerNumber" autofocus="autofocus" maxlength="10" placeholder="YYMMDDXXXX"></label>
              
            
                <label>Address: 
                <input type="text" name="customerAddress" autofocus="autofocus"></label>
                
              
            <label>Postal Address: 
            <input id="postalAddress" type="text" name="postalAddress" autofocus="autofocus"></label>
          
            <label>Phone Number: 
            <input id="phoneNumber" type="text" name="phoneNumber" autofocus="autofocus"></label>
          
          <input class="btn btn-custom col mt-2" type="submit" value="Add customer" onclick="validation()">
           <a href="/carsMenu" class="btn btn-danger col mt-2">Cancel</a>
      </fieldset>
      
      </form>
      </section>
    </div>
    </main>
    <script>




      
 function isValid(y,m,d,date) {
    return date.getYear() == y &&
    date.getMonth() + 1 == m &&
    date.getDate() == d;
};  



//funktion som validerar mobilnumret, postnumret och personnumret

    function validation() {
      //lagrar kundens phoneNumber input
      let phoneNumber = document.getElementById("phoneNumber").value;
      //lagrar regex för phoneNumber, säger till att första numret måste vara 0, och därefter måste 9 st siffror mellan 0-9 anges
      let regx = /^[0]\d{9}$/;
      //lagrar kundens postalAddress input
      let postalAddress = document.getElementById("postalAddress").value;
      let regx1 = /^\d{5}/;
      let customerNumber = document.getElementById("customerNumber").value;
      let date = new Date(customerNumber.substring(0,2), customerNumber.substring(2,4) - 1, customerNumber.substring(4,6));

      if(regx.test(phoneNumber) && regx1.test(postalAddress) && isValid(customerNumber.substring(0,2), customerNumber.substring(2,4), customerNumber.substring(4,6), date) == true) {
        document.getElementById("addCustomer").action ="/customerAdded";

      } else {
        alert("Invalid input. Please note that the postal address must start with 5 numbers, as well the phone number has to start with a 0 and have a maximum length of 10 numbers. Furthermore, the SSN must be correct.");
      }
      }


    </script>
  </main>
{% endblock %}
